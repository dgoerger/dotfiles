# Configuration file for NetworkManager.
#
# See "man 5 NetworkManager.conf" for details.
#
# The directory /usr/lib/NetworkManager/conf.d/ can contain additional configuration
# snippets installed by packages. These files are read before NetworkManager.conf
# and have thus lowest priority.
# The directory /etc/NetworkManager/conf.d/ can contain additional configuration
# snippets. Those snippets override the settings from this main file.
#
# If two files define the same key, the one that is read afterwards will overwrite
# the previous one.

[main]
<% if node['workstation']['dnscrypt_providers'].any? or node['workstation']['dns_providers'].any? -%>
<%# if we're specifying upstream, NetworkManager should not manage /etc/resolv.conf -%>
dns=none
<% elsif node['workstation']['dnsmasq'] -%>
<%# if dnsmasq IS running but under NetworkManager, say so here -%>
dns=dnsmasq
<%# else use the default, i.e. whatever the router says -%>
<% end -%>

[connection]
ipv6.ip6-privacy=2
