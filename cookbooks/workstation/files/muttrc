## CHANGEME - relies on env, export in ~/.bashrc
# source account info
source "gpg2 -dq ${MUTTRC} |"

## misc
# crypto
set ssl_starttls = yes
set ssl_force_tls = yes
# keepalive
set timeout = 600
set imap_keepalive = 300

# don't prompt on delete
set delete = 'yes'
# cache
set mbox_type = Maildir
set header_cache = "~/.cache/mutt"
set message_cachedir = "~/.cache/mutt"
set certificate_file = "~/.cache/mutt/certificates"
set history_file = "~/.cache/mutt/history"

## reading mail
# mailbox
set sleep_time = 0
set sort = 'threads'
set sort_browser = 'date'
set sort_aux = 'reverse-last-date-received'
folder-hook . "exec collapse-all"
set uncollapse_jump
set mark_old = no
set date_format = "%Y/%m/%d"
set index_format = "%2C | %Z [%d] %-25.25F (%-4.4c) %s"
# messages
set pager_index_lines = 10
set pager_context = 10
set pager_stop
set markers = no
set smart_wrap
set wrap = 80
# mimetype
auto_view text/html
alternative_order text/plain text/html
# don't update read counts very frequently when loading large mailboxes
set read_inc = 1000

## sidebar
set sidebar_visible
set mail_check_stats
set sidebar_sort_method = 'path'
set sidebar_format = '%B %> %!%N'
# C-n, C-p to select next, previous folders
# C-o to open selected folder
bind index,pager \CP sidebar-prev
bind index,pager \CN sidebar-next
bind index,pager \CO sidebar-open

## compose options
set editor = 'vim -c "set spell spelllang=en_ca formatoptions+=aw textwidth=72"'
set fast_reply
set include
set text_flowed = yes
set send_charset = "utf-8"
set forward_format = '%s'

## block access to 'enter-command' function, potential for password leak
# see: https://wiki.archlinux.org/index.php/Mutt#Security_concern
bind generic,alias,attach,browser,editor,index,compose,pager,pgp,postpone ':' noop
