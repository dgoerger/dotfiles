### GNOME KEYRING doesn't support ed25519 keys yet - gnome#723274 - let's use upstream ssh-agent instead
## --> enable for an UNPRIVILEGED USER:
# $ mkdir -p ${HOME}/.config/systemd/user
# $ # paste in the contents of this file
# $ vi ${HOME}.config/systemd/user/ssh-agent.service
# $ systemctl --user enable ssh-agent
# $ systemctl --user start ssh-agent
# $ echo -e '\n# connect to ssh socket if running under systemd\nif [[ -S ${XDG_RUNTIME_DIR}/ssh-agent.socket ]]; then\n  export SSH_AUTH_SOCK="${XDG_RUNTIME_DIR}/ssh-agent.socket"\nfi' >> ~/.bashrc
# $ bash
## --> enable globally for ALL USERS:
# $ sudo mkdir -p /etc/systemd/user
# $ # paste in the contents of this file
# $ sudo vi /etc/systemd/user/ssh-agent.service
# $ # disable the built-in GNOME KEYRING agent
# $ sudo ln -sf /dev/null /etc/xdg/autostart/gnome-keyring-ssh.desktop
# $ # append to default /etc/skel/.bashrc so new users have this sourced by default
# $ echo -e '\n# connect to ssh socket if running under systemd\nif [[ -S ${XDG_RUNTIME_DIR}/ssh-agent.socket ]]; then\n  export SSH_AUTH_SOCK="${XDG_RUNTIME_DIR}/ssh-agent.socket"\nfi' | sudo tee --append /etc/skel/.bashrc
# $ sudo reboot
[Unit]
Description=SSH key agent

[Service]
Type=forking
Environment=SSH_AUTH_SOCK=%t/ssh-agent.socket
ExecStart=/usr/bin/ssh-agent -a $SSH_AUTH_SOCK

[Install]
WantedBy=default.target
